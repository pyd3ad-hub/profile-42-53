<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lua Code Manager</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getFirestore, doc, setDoc, getDoc, onSnapshot } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';
        
        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBeO9xz5edZLngDE2G98WyJnxw_e9MKRTQ",
            authDomain: "shub-a0d91.firebaseapp.com",
            projectId: "shub-a0d91",
            storageBucket: "shub-a0d91.firebasestorage.app",
            messagingSenderId: "620094592442",
            appId: "1:620094592442:web:69e9854f0c3a1983a37983"
        };
        
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        
        // Make Firebase available globally
        window.firebaseDb = db;
        window.firebaseDoc = doc;
        window.firebaseSetDoc = setDoc;
        window.firebaseGetDoc = getDoc;
        window.firebaseOnSnapshot = onSnapshot;
        
        console.log('Firebase initialized');
        
        // Trigger cloud sync initialization after Firebase is ready
        window.dispatchEvent(new Event('firebaseReady'));
    </script>
</head>
<body>
    <!-- Login Modal (shows before main content) -->
    <div id="login-modal" class="modal login-modal">
        <div class="modal-content login-modal-content">
            <div class="login-container">
                <div class="login-header">
                    <div class="sidebar-logo">
                        <span class="logo-icon">ìÜ©üú≤ìÜ™</span>
                        <h2 class="sidebar-title">4253</h2>
                    </div>
                    <h2 class="login-title">Enter Your Security Details</h2>
                </div>
                <form class="login-form" onsubmit="handleLogin(event)">
                    <div class="login-form-group">
                        <label for="login-discord-id" class="login-label">
                            <span class="label-icon">üí¨</span>
                            Discord ID
                        </label>
                        <input type="text" id="login-discord-id" class="login-input" placeholder="Enter your Discord ID" required>
                    </div>
                    <div class="login-form-group">
                        <label for="login-key" class="login-label">
                            <span class="label-icon">üîë</span>
                            Security Key
                        </label>
                        <input type="password" id="login-key" class="login-input" placeholder="Enter your security key" required>
                    </div>
                    <button type="submit" class="btn btn-blue login-submit-btn">LOGIN</button>
                    <div id="login-error" class="login-error" style="display: none;"></div>
                </form>
            </div>
        </div>
    </div>
    <!-- Shooting Stars Background -->
    <div class="shooting-star"></div>
    <div class="shooting-star"></div>
    <div class="shooting-star"></div>
    <div class="shooting-star"></div>
    <div class="shooting-star"></div>
    
    <!-- Mobile Menu Toggle -->
    <button class="mobile-menu-toggle" onclick="toggleMobileMenu()" aria-label="Toggle menu">‚ò∞</button>
    <div class="mobile-overlay" onclick="closeMobileMenu()"></div>
    
    <div class="app-container">
        <!-- Left Sidebar with Tabs -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-logo">
                    <span class="logo-icon">ìÜ©üú≤ìÜ™</span>
                    <h2 class="sidebar-title">4253</h2>
                </div>
                <button class="mobile-close-btn" onclick="closeMobileMenu()" aria-label="Close menu">‚úï</button>
            </div>
            <nav class="sidebar-nav">
                <button class="tab-button active" data-tab="dashboard" onclick="event.stopPropagation(); switchTab('dashboard', event); return false;">
                    <span class="tab-icon">‚äû</span>
                    <span class="tab-label">Dashboard</span>
                </button>
                <button class="tab-button" data-tab="projects" onclick="event.stopPropagation(); switchTab('projects', event); return false;">
                    <span class="tab-icon">üìÑ</span>
                    <span class="tab-label">Projects</span>
                </button>
                <button class="tab-button" data-tab="users" onclick="event.stopPropagation(); switchTab('users', event); return false;">
                    <span class="tab-icon">üë•</span>
                    <span class="tab-label">Users</span>
                </button>
                <button class="tab-button" data-tab="discord" onclick="event.stopPropagation(); switchTab('discord', event); return false;">
                    <span class="tab-icon">ü§ñ</span>
                    <span class="tab-label">Discord Bot</span>
                </button>
                <button class="tab-button" data-tab="custom-site" onclick="event.stopPropagation(); switchTab('custom-site', event); return false;">
                    <span class="tab-icon">üåê</span>
                    <span class="tab-label">Custom Site</span>
                </button>
            </nav>
            <div class="sidebar-account">
                <div class="account-label">ACCOUNT</div>
                <button class="tab-button account-button" data-tab="profile" onclick="event.stopPropagation(); switchTab('profile', event); return false;">
                    <span class="tab-icon">üë§</span>
                    <span class="tab-label">Profile</span>
                </button>
                <button class="tab-button account-button" onclick="handleLogout()">
                    <span class="tab-label">Log out</span>
                </button>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="main-content">
            <div class="breadcrumb-nav">
                <span class="breadcrumb-site">4253</span>
                <span class="breadcrumb-separator">/</span>
                <span class="breadcrumb-tab" id="breadcrumb-tab">dashboard</span>
            </div>
            <div class="content-header">
                <h1 id="content-title">Dashboard</h1>
            </div>
            
            <!-- Dashboard Tab Content -->
            <div id="dashboard-content" class="tab-content active">
                <!-- Total Executions Card (Stretched) -->
                <div class="dashboard-stat-card">
                    <div class="stat-card stat-card-grey stat-card-full-width">
                        <div class="stat-content">
                            <div class="stat-label-top">Total Executions</div>
                            <div class="stat-value">0/‚àû</div>
                            <div class="stat-progress">
                                <div class="stat-progress-bar stat-progress-green" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Graph Section -->
                <div class="dashboard-graph-section">
                    <div class="graph-header">
                        <h3 class="graph-title">Execution Statistics</h3>
                        <div class="graph-filters">
                            <button class="graph-filter-btn active" data-period="day">Day</button>
                            <button class="graph-filter-btn" data-period="week">Week</button>
                            <button class="graph-filter-btn" data-period="month">Month</button>
                            <button class="graph-filter-btn" data-period="year">Year</button>
                        </div>
                    </div>
                    <div class="graph-container">
                        <div class="graph-placeholder">
                            <svg class="graph-svg" viewBox="0 0 800 400" preserveAspectRatio="none">
                                <!-- X-axis -->
                                <line x1="50" y1="350" x2="750" y2="350" stroke="rgba(255,255,255,0.2)" stroke-width="2"/>
                                <!-- Y-axis -->
                                <line x1="50" y1="50" x2="50" y2="350" stroke="rgba(255,255,255,0.2)" stroke-width="2"/>
                                <!-- Flat line at 0 -->
                                <line x1="50" y1="350" x2="750" y2="350" stroke="rgba(255,255,255,0.5)" stroke-width="3" stroke-dasharray="5,5"/>
                                <!-- Y-axis label -->
                                <text x="30" y="200" fill="rgba(255,255,255,0.5)" font-size="12" text-anchor="middle" transform="rotate(-90 30 200)">Executions</text>
                                <!-- X-axis label -->
                                <text x="400" y="380" fill="rgba(255,255,255,0.5)" font-size="12" text-anchor="middle">Time</text>
                            </svg>
                            <div class="graph-zero-label">0</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Users Tab Content -->
            <div id="users-content" class="tab-content">
                <!-- Stats Cards -->
                <div class="stats-container">
                    <div class="stat-card stat-card-green">
                        <div class="stat-icon stat-icon-green">üìÑ</div>
                        <div class="stat-content">
                            <div class="stat-label">Total Scripts</div>
                            <div class="stat-value-large">0</div>
                            <div class="stat-progress">
                                <div class="stat-progress-bar stat-progress-green" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                    <div class="stat-card stat-card-blue">
                        <div class="stat-icon stat-icon-blue">üë•</div>
                        <div class="stat-content">
                            <div class="stat-label">Total Users</div>
                            <div class="stat-value-large">0</div>
                            <div class="stat-progress">
                                <div class="stat-progress-bar stat-progress-blue" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                    <div class="stat-card stat-card-red">
                        <div class="stat-icon stat-icon-red">üõ°Ô∏è</div>
                        <div class="stat-content">
                            <div class="stat-label">Banned Users</div>
                            <div class="stat-value-large">0</div>
                            <div class="stat-description">There are 0 blacklisted IPs</div>
                        </div>
                    </div>
                </div>

                <!-- Project/User Management Section -->
                <div class="project-section">
                    <div class="project-header">
                        <div class="project-title-group">
                            <span class="project-icon">üî¥</span>
                            <div>
                                <h2 class="project-title">4253s Lua Projects</h2>
                            </div>
                        </div>
                        <div class="project-actions">
                            <button class="btn btn-blue btn-add-user" onclick="openAddUserModal()">+ ADD USER</button>
                            <button class="btn btn-green btn-edit-users">EDIT USERS</button>
                            <button class="btn btn-grey btn-icon">‚öôÔ∏è</button>
                        </div>
                    </div>

                    <!-- Search and Pagination -->
                    <div class="search-pagination-container">
                        <div class="search-container">
                            <input type="text" class="search-input" placeholder="Search users...">
                            <button class="btn btn-grey btn-search">üîç SEARCH</button>
                        </div>
                        <div class="pagination-info">
                            <span>Showing users:</span>
                            <div class="pagination-controls">
                                <button class="pagination-btn">‚Üê</button>
                                <span class="pagination-text">0-100</span>
                                <button class="pagination-btn">‚Üí</button>
                            </div>
                        </div>
                    </div>

                    <!-- Users Table -->
                    <div class="table-container">
                        <table class="scripts-table users-table">
                            <thead>
                                <tr>
                                    <th>USER KEY</th>
                                    <th>DISCORD ID</th>
                                    <th>STATUS</th>
                                    <th>NOTE</th>
                                    <th>EXECUTIONS</th>
                                    <th>HWID RESETS</th>
                                    <th>DAYS</th>
                                    <th>BAN REASON</th>
                                    <th>AC</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td colspan="9" class="empty-table-message">No users found. Click "+ ADD USER" to create a new user.</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Projects Tab Content -->
            <div id="projects-content" class="tab-content">
                <!-- Stats Cards -->
                <div class="stats-container">
                    <div class="stat-card stat-card-green">
                        <div class="stat-icon stat-icon-green">üìÑ</div>
                        <div class="stat-content">
                            <div class="stat-label">Projects</div>
                            <div class="stat-value">0/‚àû</div>
                            <div class="stat-progress">
                                <div class="stat-progress-bar stat-progress-green" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                    <div class="stat-card stat-card-grey">
                        <div class="stat-content">
                            <div class="stat-label-top">Total Scripts</div>
                            <div class="stat-value">0/‚àû</div>
                            <div class="stat-progress">
                                <div class="stat-progress-bar stat-progress-green" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                    <div class="stat-card stat-card-purple">
                        <div class="stat-icon stat-icon-purple">üîí</div>
                        <div class="stat-content">
                            <div class="stat-label-top">Monthly Obfuscations</div>
                            <div class="stat-value">0/‚àû</div>
                            <div class="stat-reset">* Resets in 30 days</div>
                            <div class="stat-progress">
                                <div class="stat-progress-bar stat-progress-purple" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Create Project Button -->
                <div class="create-project-container">
                    <button class="btn btn-blue btn-create-project" onclick="openCreateProjectModal()">+ CREATE PROJECT</button>
                </div>
            </div>

            <!-- Discord Bot Tab Content -->
            <div id="discord-content" class="tab-content">
                <!-- Stats Cards -->
                <div class="stats-container">
                    <div class="stat-card stat-card-green">
                        <div class="stat-icon stat-icon-green">üìÅ</div>
                        <div class="stat-content">
                            <div class="stat-label">Bot Files</div>
                            <div class="stat-value-large" id="discord-files-count">0</div>
                        </div>
                    </div>
                    <div class="stat-card stat-card-blue">
                        <div class="stat-icon stat-icon-blue">üêç</div>
                        <div class="stat-content">
                            <div class="stat-label">Python Files</div>
                            <div class="stat-value-large" id="discord-python-count">0</div>
                        </div>
                    </div>
                    <div class="stat-card stat-card-purple">
                        <div class="stat-icon stat-icon-purple">‚öôÔ∏è</div>
                        <div class="stat-content">
                            <div class="stat-label">Config Files</div>
                            <div class="stat-value-large" id="discord-config-count">0</div>
                        </div>
                    </div>
                </div>

                <!-- Bot Management Section -->
                <div class="project-section">
                    <div class="project-header">
                        <div class="project-title-group">
                            <span class="project-icon">ü§ñ</span>
                            <div>
                                <h2 class="project-title">Discord Bot Files</h2>
                                <p style="color: rgba(255,255,255,0.6); font-size: 0.875rem; margin-top: 0.25rem;">
                                    ‚úÖ Edit bot files here. Changes sync to GitHub ‚Üí Render auto-deploys ‚Üí Bot restarts with new code.
                                </p>
                            </div>
                        </div>
                        <div class="project-actions">
                            <button class="btn btn-blue" onclick="importDiscordBotFiles()">üì• IMPORT FILES</button>
                            <button class="btn btn-green" onclick="syncDiscordBotToGitHub()">üîÑ SYNC TO GITHUB</button>
                            <button class="btn btn-grey" onclick="restartDiscordBotOnRender()">üîÑ RESTART BOT</button>
                        </div>
                    </div>

                    <!-- File Browser -->
                    <div class="discord-files-container" style="margin-top: 1.5rem;">
                        <div class="table-container">
                            <table class="scripts-table">
                                <thead>
                                    <tr>
                                        <th>FILE NAME</th>
                                        <th>TYPE</th>
                                        <th>SIZE</th>
                                        <th>LAST MODIFIED</th>
                                        <th>ACTIONS</th>
                                    </tr>
                                </thead>
                                <tbody id="discord-files-list">
                                    <tr>
                                        <td colspan="5" class="empty-table-message">No bot files loaded. Click "IMPORT FILES" to load your Discord bot files.</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Custom Site Tab Content -->
            <div id="custom-site-content" class="tab-content">
                <!-- Stats Cards -->
                <div class="stats-container">
                    <div class="stat-card stat-card-green">
                        <div class="stat-icon stat-icon-green">üëÅÔ∏è</div>
                        <div class="stat-content">
                            <div class="stat-label">Total Views</div>
                            <div class="stat-value-large" id="profile-total-views">0</div>
                            <div class="stat-progress">
                                <div class="stat-progress-bar stat-progress-green" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                    <div class="stat-card stat-card-blue">
                        <div class="stat-icon stat-icon-blue">üìä</div>
                        <div class="stat-content">
                            <div class="stat-label">Today's Views</div>
                            <div class="stat-value-large" id="profile-today-views">0</div>
                            <div class="stat-progress">
                                <div class="stat-progress-bar stat-progress-blue" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                    <div class="stat-card stat-card-purple">
                        <div class="stat-icon stat-icon-purple">üîó</div>
                        <div class="stat-content">
                            <div class="stat-label">Social Links</div>
                            <div class="stat-value-large" id="profile-social-count">0</div>
                            <div class="stat-progress">
                                <div class="stat-progress-bar stat-progress-purple" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Profile Management Section -->
                <div class="project-section">
                    <div class="project-header">
                        <div class="project-title-group">
                            <span class="project-icon">üåê</span>
                            <div>
                                <h2 class="project-title">Profile Website Management</h2>
                                <p style="color: rgba(255,255,255,0.6); font-size: 0.875rem; margin-top: 0.25rem;">
                                    Manage your profile at <a href="https://profile.42-53.com" target="_blank" style="color: var(--blue);">profile.42-53.com</a>
                                </p>
                            </div>
                        </div>
                        <div class="project-actions">
                            <button class="btn btn-blue" onclick="openEditProfileModal()">‚úèÔ∏è EDIT PROFILE</button>
                            <button class="btn btn-green" onclick="openAddSocialModal()">‚ûï ADD SOCIAL</button>
                            <a href="custom-site.html" target="_blank" class="btn btn-grey">üîó VIEW PROFILE</a>
                        </div>
                    </div>

                    <!-- Profile Settings -->
                    <div style="background: var(--bg-card-dark); padding: 1.5rem; border-radius: 0.75rem; margin-top: 1.5rem; border: 1px solid rgba(255,255,255,0.05);">
                        <h3 style="font-size: 1.1rem; font-weight: 600; margin-bottom: 1rem; color: var(--text-white);">Profile Information</h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
                            <div>
                                <label style="display: block; font-size: 0.875rem; color: rgba(255,255,255,0.7); margin-bottom: 0.5rem;">Username</label>
                                <input type="text" id="profile-username-input" class="modern-input" placeholder="4253" style="width: 100%;">
                            </div>
                            <div>
                                <label style="display: block; font-size: 0.875rem; color: rgba(255,255,255,0.7); margin-bottom: 0.5rem;">Bio/Description</label>
                                <input type="text" id="profile-bio-input" class="modern-input" placeholder="Python/Lua Developer" style="width: 100%;">
                            </div>
                            <div>
                                <label style="display: block; font-size: 0.875rem; color: rgba(255,255,255,0.7); margin-bottom: 0.5rem;">Location</label>
                                <input type="text" id="profile-location-input" class="modern-input" placeholder="nuh uh" style="width: 100%;">
                            </div>
                        </div>
                        <button class="btn btn-blue" onclick="saveProfileInfo()" style="margin-top: 1rem;">üíæ SAVE PROFILE INFO</button>
                    </div>

                    <!-- Social Links List -->
                    <div style="background: var(--bg-card-dark); padding: 1.5rem; border-radius: 0.75rem; margin-top: 1.5rem; border: 1px solid rgba(255,255,255,0.05);">
                        <h3 style="font-size: 1.1rem; font-weight: 600; margin-bottom: 1rem; color: var(--text-white);">Social Links</h3>
                        <div id="social-links-list" style="display: grid; gap: 1rem;">
                            <!-- Social links will be loaded here -->
                        </div>
                    </div>

                    <!-- View Analytics -->
                    <div style="background: var(--bg-card-dark); padding: 1.5rem; border-radius: 0.75rem; margin-top: 1.5rem; border: 1px solid rgba(255,255,255,0.05);">
                        <h3 style="font-size: 1.1rem; font-weight: 600; margin-bottom: 1rem; color: var(--text-white);">View Analytics</h3>
                        <div id="view-analytics" style="color: rgba(255,255,255,0.7); font-size: 0.875rem;">
                            Loading analytics...
                        </div>
                    </div>
                </div>
            </div>

            <!-- Profile Tab Content -->
            <div id="profile-content" class="tab-content">
                <div class="profile-container">
                    <!-- Left Section -->
                    <div class="profile-left">
                        <!-- Profile Header -->
                        <div class="profile-header-section">
                            <div class="profile-picture">üë§</div>
                            <div class="profile-header-info">
                                <div class="profile-discord-label">Discord:</div>
                                <div class="profile-discord-id">561293567780192273</div>
                            </div>
                        </div>

                        <!-- Details Section -->
                        <div class="profile-section">
                            <h3 class="profile-section-title">Details</h3>
                            <div class="profile-detail-item">
                                <span class="detail-label">Registered At:</span>
                                <span class="detail-value">12 Jan 2026</span>
                            </div>
                            <div class="profile-detail-item">
                                <span class="detail-label">Ends At:</span>
                                <span class="detail-value">Never</span>
                            </div>
                            <div class="profile-detail-item">
                                <span class="detail-label">Discord ID:</span>
                                <span class="detail-value">561293567780192273</span>
                            </div>
                        </div>
                    </div>

                    <!-- Right Section -->
                    <div class="profile-right">
                        <!-- Security Settings -->
                        <div class="profile-section">
                            <h3 class="profile-section-title">Security Settings</h3>
                            <div class="security-section">
                                <div class="security-info">
                                    <div class="security-info-item">
                                        <span class="info-label">Discord ID:</span>
                                        <span class="info-value" id="display-discord-id">561293567780192273</span>
                                    </div>
                                    <div class="security-info-item">
                                        <span class="info-label">Security Key:</span>
                                        <span class="info-value security-key-display" id="display-security-key">‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢</span>
                                        <button class="btn btn-grey btn-show-key" onclick="toggleKeyVisibility()" style="padding: 0.375rem 0.75rem; font-size: 0.75rem; margin-left: 0.5rem;">SHOW</button>
                                    </div>
                                </div>
                                <button class="btn btn-blue btn-reset-key" onclick="openResetKeyModal()" style="width: 100%; margin-top: 1rem;">üîë RESET SECURITY KEY</button>
                            </div>
                        </div>

                        <!-- Auto-Save Backup -->
                        <div class="profile-section auto-save-section auto-save-stretched">
                            <div class="auto-save-card">
                                <div class="auto-save-icon">üíæ</div>
                                <div class="auto-save-content">
                                    <h3 class="auto-save-title">Auto-Save Backup</h3>
                                    <div class="auto-save-status" id="auto-save-status">Enabled</div>
                                    <div class="auto-save-info">
                                        <div class="auto-save-info-item">
                                            <span class="info-label">Last Backup:</span>
                                            <span class="info-value" id="last-backup-time">Never</span>
                                        </div>
                                        <div class="auto-save-info-item">
                                            <span class="info-label">Files Saved:</span>
                                            <span class="info-value" id="files-saved-count">0</span>
                                        </div>
                                    </div>
                                    <div class="auto-save-actions">
                                        <button class="btn btn-grey btn-manual-backup" onclick="triggerManualBackup()">üíæ BACKUP NOW</button>
                                        <button class="btn btn-grey btn-view-backups" onclick="openBackupsModal()">üìÇ VIEW BACKUPS</button>
                                        <button class="btn btn-grey btn-toggle-auto-save" onclick="toggleAutoSave()" id="toggle-auto-save-btn">‚è∏Ô∏è DISABLE</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Loader Server Settings -->
                        <div class="profile-section">
                            <h3 class="profile-section-title">Loader Server</h3>
                            <div class="security-section">
                                <div class="modern-form-group" style="margin-bottom: 1rem;">
                                    <label for="loader-server-url" class="modern-label">
                                        <span class="label-icon">üåê</span>
                                        <span>Loader Server URL</span>
                                    </label>
                                    <input type="text" id="loader-server-url" class="modern-input" placeholder="https://your-app.vercel.app/api/loaders" value="">
                                    <div class="modern-form-description">Enter your Vercel server URL where loader API is deployed</div>
                                </div>
                                <button class="btn btn-blue" onclick="saveLoaderServerUrl()" style="width: 100%; margin-bottom: 0.75rem;">üíæ SAVE SERVER URL</button>
                                <div id="loader-server-status" style="margin-top: 0.5rem; font-size: 0.875rem; color: rgba(255,255,255,0.6);"></div>
                            </div>
                        </div>
                        
                        <!-- Scripts Sync Section -->
                        <div class="profile-section">
                            <h3 class="profile-section-title">Scripts Sync</h3>
                            <div class="security-section">
                                <div class="modern-form-group" style="margin-bottom: 1rem;">
                                    <p style="color: rgba(255,255,255,0.7); font-size: 0.875rem; margin-bottom: 1rem;">
                                        Sync projects with <a href="https://scripts.42-53.com" target="_blank" style="color: var(--blue);">scripts.42-53.com</a><br>
                                        <small style="color: rgba(255,255,255,0.5);">Projects automatically sync to GitHub. Import scripts from GitHub to add them here.</small><br>
                                        <small style="color: rgba(255,255,255,0.5); margin-top: 0.5rem; display: block;">
                                            <strong>Protected Access:</strong> Use <code style="background: rgba(0,0,0,0.3); padding: 2px 4px; border-radius: 3px;">/api/scripts/filename.lua?script_key=xxx</code> to block browsers. Direct GitHub links are public.
                                        </small>
                                    </p>
                                </div>
                                <div class="modern-form-group" style="margin-bottom: 0.75rem;">
                                    <label for="github-owner" class="modern-label">
                                        <span class="label-icon">üë§</span>
                                        <span>GitHub Username</span>
                                    </label>
                                    <input type="text" id="github-owner" class="modern-input" placeholder="pyd3ad-hub">
                                    <div class="modern-form-description">Your GitHub username</div>
                                </div>
                                <div class="modern-form-group" style="margin-bottom: 0.75rem;">
                                    <label for="github-repo" class="modern-label">
                                        <span class="label-icon">üìÅ</span>
                                        <span>Repository Name</span>
                                    </label>
                                    <input type="text" id="github-repo" class="modern-input" placeholder="scripts-42-53">
                                    <div class="modern-form-description">Name of your scripts repository</div>
                                </div>
                                <div class="modern-form-group" style="margin-bottom: 0.75rem;">
                                    <label for="github-token" class="modern-label">
                                        <span class="label-icon">üîë</span>
                                        <span>GitHub Personal Access Token</span>
                                    </label>
                                    <input type="password" id="github-token" class="modern-input" placeholder="ghp_xxxxxxxxxxxx">
                                    <div class="modern-form-description">Create at: <a href="https://github.com/settings/tokens" target="_blank" style="color: var(--blue);">github.com/settings/tokens</a> (needs repo permissions)</div>
                                </div>
                                <button class="btn btn-blue" onclick="saveGitHubConfigUI()" style="width: 100%; margin-bottom: 0.75rem;">üíæ SAVE CONFIG</button>
                                <button class="btn btn-green" onclick="importScriptsFromGitHub()" style="width: 100%; margin-bottom: 0.75rem;">üì• IMPORT FROM GITHUB</button>
                                <div id="github-sync-status" style="margin-top: 0.5rem; font-size: 0.875rem; color: rgba(255,255,255,0.6);"></div>
                            </div>
                        </div>
                        
                        <!-- Cloud Sync Section -->
                        <div class="profile-section">
                            <h3 class="profile-section-title">Cloud Sync</h3>
                            <div class="security-section">
                                <div class="modern-form-group" style="margin-bottom: 1rem;">
                                    <p style="color: rgba(255,255,255,0.7); font-size: 0.875rem; margin-bottom: 1rem;">
                                        <span id="cloud-sync-status">‚öôÔ∏è Automatic sync ready</span><br>
                                        <small style="color: rgba(255,255,255,0.5);">Your data automatically syncs across all devices when configured.</small>
                                    </p>
                                </div>
                                <div class="auto-save-actions">
                                    <button class="btn btn-blue" onclick="manualCloudSync()" style="width: 100%; margin-bottom: 0.75rem;">üîÑ SYNC NOW</button>
                                    <button class="btn btn-grey" onclick="exportData()" style="width: 100%; margin-bottom: 0.75rem;">üì• EXPORT BACKUP</button>
                                    <button class="btn btn-grey" onclick="document.getElementById('import-file-input').click()" style="width: 100%;">üì§ IMPORT BACKUP</button>
                                    <input type="file" id="import-file-input" accept=".json" style="display: none;" onchange="importData(event)">
                                </div>
                                <div id="sync-status" style="margin-top: 0.75rem; font-size: 0.875rem; color: rgba(255,255,255,0.6);"></div>
                            </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Create Project Modal -->
    <div id="create-project-modal" class="modal">
        <div class="modal-content create-project-modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Create Project</h2>
                <div class="modal-header-buttons">
                    <button type="button" class="btn-modal btn-modal-green" onclick="document.querySelector('.create-project-form').requestSubmit()">
                        <span>‚úì</span>
                    </button>
                    <button type="button" class="btn-modal btn-modal-red" onclick="closeCreateProjectModal()">
                        <span>‚úï</span>
                    </button>
                </div>
            </div>
            <form class="create-project-form" onsubmit="handleCreateProject(event)">
                <div class="form-group">
                    <label for="project-name">Project Name</label>
                    <input type="text" id="project-name" name="project-name" placeholder="Enter project name" required>
                </div>
                
                <div class="form-row">
                    <div class="form-column">
                        <div class="form-group">
                            <label for="logs-webhook">Logs Webhook</label>
                            <input type="text" id="logs-webhook" name="logs-webhook" placeholder="Enter webhook URL">
                            <div class="form-description">*Successful executions will be sent to this webhook</div>
                        </div>
                        
                        <div class="form-group toggle-group">
                            <label class="toggle-label">
                                <input type="checkbox" id="allow-hwid-reset" class="toggle-input">
                                <span class="toggle-slider-modal"></span>
                                <span class="toggle-text">Allow HWID reset</span>
                            </label>
                            <div class="form-description">*When enabled, users can reset HWIDs.</div>
                        </div>
                        
                        <div class="form-group toggle-group">
                            <label class="toggle-label">
                                <input type="checkbox" id="auto-delete-expired" class="toggle-input">
                                <span class="toggle-slider-modal"></span>
                                <span class="toggle-text">Auto delete expired users</span>
                            </label>
                            <div class="form-description">*When enabled, expired users will be automatically deleted every 15 minutes.</div>
                        </div>
                    </div>
                    
                    <div class="form-column">
                        <div class="form-group">
                            <label for="alert-webhook">Alert Webhook</label>
                            <input type="text" id="alert-webhook" name="alert-webhook" placeholder="Enter webhook URL">
                            <div class="form-description">*Crack attempts and bans will be reported to this webhook</div>
                        </div>
                        
                        <div class="form-group">
                            <label for="cooldown">Cooldown</label>
                            <input type="text" id="cooldown" name="cooldown" placeholder="Enter days">
                            <div class="form-description">*Number of days user will need to wait before resetting HWID.</div>
                        </div>
                        
                        <div class="form-group toggle-group">
                            <label class="toggle-label">
                                <input type="checkbox" id="allow-hwid-cloned" class="toggle-input">
                                <span class="toggle-slider-modal"></span>
                                <span class="toggle-text">Allow HWID cloned key sharing</span>
                            </label>
                            <div class="form-description">*When enabled, people can use one key on different computers with same HWID (Only useful for server hopping scripts with multi instance on VPSes).</div>
                        </div>
                    </div>
                </div>
                
                <div class="modal-footer">
                    <button type="button" class="btn btn-green btn-file-inject" onclick="document.getElementById('file-input').click()">
                        üìé INJECT FILE
                    </button>
                    <input type="file" id="file-input" accept=".lua" style="display: none;">
                    <div id="file-name" class="file-name-display"></div>
                    <button type="submit" class="btn-modal btn-modal-green btn-create-submit">
                        <span>‚úì</span>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add User Modal -->
    <div id="add-user-modal" class="modal">
        <div class="modal-content add-user-modal-content modern-modal">
            <div class="modal-header modern-modal-header">
                <div class="modal-title-wrapper">
                    <div class="modal-icon">üë§</div>
                    <h2 class="modal-title">Add New User</h2>
                </div>
                <div class="modal-header-buttons">
                    <button type="button" class="btn-modal btn-modal-green" onclick="document.querySelector('.add-user-form').requestSubmit()">
                        <span>‚úì</span>
                    </button>
                    <button type="button" class="btn-modal btn-modal-red" onclick="closeAddUserModal()">
                        <span>‚úï</span>
                    </button>
                </div>
            </div>
            <div class="add-user-instruction modern-instruction">
                <div class="instruction-icon-wrapper">
                    <span class="instruction-icon">üí°</span>
                </div>
                <div class="instruction-content">
                    <p class="instruction-title">Quick Start</p>
                    <p class="instruction-text">Leave all fields empty to create an unused key. The key can be added to scripts like: <code>script_key="key here";</code></p>
                </div>
            </div>
            <form class="add-user-form modern-form" onsubmit="handleAddUser(event)">
                <div class="modern-form-grid">
                    <div class="modern-form-group">
                        <label for="user-note" class="modern-label">
                            <span class="label-icon">üìù</span>
                            <span>User Note</span>
                        </label>
                        <input type="text" id="user-note" name="user-note" class="modern-input" placeholder="Enter a reminder note...">
                        <div class="modern-form-description">Optional reminder note for this user</div>
                    </div>
                    
                    <div class="modern-form-group">
                        <label for="discord-id" class="modern-label">
                            <span class="label-icon">üí¨</span>
                            <span>Discord ID</span>
                        </label>
                        <input type="text" id="discord-id" name="discord-id" class="modern-input" placeholder="Enter Discord ID...">
                        <div class="modern-form-description">Required for /resethwid command. Users can also link via /redeem [code]</div>
                    </div>
                    
                    <div class="modern-form-group">
                        <label for="identifier" class="modern-label">
                            <span class="label-icon">üîê</span>
                            <span>HWID Identifier</span>
                        </label>
                        <input type="text" id="identifier" name="identifier" class="modern-input" placeholder="Enter HWID...">
                        <div class="modern-form-description">HWID will be auto-assigned on first execution if left empty</div>
                    </div>
                    
                    <div class="modern-form-group">
                        <label for="days" class="modern-label">
                            <span class="label-icon">‚è∞</span>
                            <span>Subscription Days</span>
                        </label>
                        <input type="text" id="days" name="days" class="modern-input" placeholder="Enter days (leave empty for infinite)">
                        <div class="modern-form-description">Days start counting after key redemption. Leave blank for unlimited access</div>
                    </div>
                </div>
            </form>
        </div>
                </div>
                
    <!-- Backups Modal -->
    <div id="backups-modal" class="modal">
        <div class="modal-content add-user-modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Backup History</h2>
                <div class="modal-header-buttons">
                    <button type="button" class="btn-modal btn-modal-red" onclick="closeBackupsModal()">
                        <span>‚úï</span>
                    </button>
                </div>
            </div>
            <div class="backups-content" id="backups-content" style="padding: 2rem; max-height: 600px; overflow-y: auto;">
                <div class="empty-state">
                    <div class="empty-icon">üìÇ</div>
                    <h2>No Backups Yet</h2>
                    <p>Backups will appear here after you create them</p>
                </div>
            </div>
        </div>
                </div>
                
    <!-- Reset Key Modal -->
    <div id="reset-key-modal" class="modal">
        <div class="modal-content add-user-modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Reset Security Key</h2>
                <div class="modal-header-buttons">
                    <button type="button" class="btn-modal btn-modal-red" onclick="closeResetKeyModal()">
                        <span>‚úï</span>
                    </button>
                </div>
            </div>
            <div class="add-user-instruction modern-instruction" style="margin: 1.5rem 2rem;">
                <div class="instruction-icon-wrapper">
                    <span class="instruction-icon">‚ö†Ô∏è</span>
                </div>
                <div class="instruction-content">
                    <p class="instruction-title">Warning</p>
                    <p class="instruction-text">Resetting your security key will generate a new key. You'll need to use the new key to log in next time. Make sure to save it!</p>
                </div>
            </div>
            <form class="add-user-form modern-form" onsubmit="handleResetKey(event)" style="padding: 0 2rem 2rem 2rem;">
                <div class="modern-form-group">
                    <label for="security-code" class="modern-label">
                        <span class="label-icon">üîê</span>
                        <span>Security Code</span>
                    </label>
                    <input type="text" id="security-code" class="modern-input" placeholder="Enter security code" required>
                    <div class="modern-form-description">Enter the required security code to proceed</div>
                </div>
                <div class="modern-form-group">
                    <label for="current-key" class="modern-label">
                        <span class="label-icon">üîë</span>
                        <span>Current Security Key</span>
                    </label>
                    <input type="password" id="current-key" class="modern-input" placeholder="Enter your current security key" required>
                    <div class="modern-form-description">Enter your current key to confirm</div>
                </div>
                <div class="modal-footer" style="margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid rgba(255,255,255,0.1);">
                    <button type="button" class="btn btn-grey" onclick="closeResetKeyModal()" style="padding: 0.75rem 1.5rem;">CANCEL</button>
                    <button type="submit" class="btn btn-blue" style="padding: 0.75rem 1.5rem;">RESET KEY</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Discord Bot File Editor Modal -->
    <div id="discord-file-editor-modal" class="modal">
        <div class="modal-content add-user-modal-content" style="max-width: 90vw; width: 90vw; max-height: 90vh;">
            <div class="modal-header">
                <h2 class="modal-title" id="discord-file-editor-title">Edit File</h2>
                <div class="modal-header-buttons">
                    <button type="button" class="btn-modal btn-modal-green" onclick="saveDiscordFile()">
                        <span>üíæ</span>
                    </button>
                    <button type="button" class="btn-modal btn-red" onclick="closeDiscordFileEditor()">
                        <span>‚úï</span>
                    </button>
                </div>
            </div>
            <div style="padding: 1.5rem 2rem;">
                <textarea id="discord-file-editor-content" 
                    style="width: 100%; height: 60vh; background: rgba(0,0,0,0.3); 
                           color: #fff; border: 1px solid rgba(255,255,255,0.1); 
                           padding: 1rem; font-family: 'Courier New', monospace; 
                           font-size: 0.875rem; resize: vertical; 
                           border-radius: 8px; outline: none;" 
                    spellcheck="false"></textarea>
                <div class="modal-footer" style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid rgba(255,255,255,0.1);">
                    <button type="button" class="btn btn-grey" onclick="closeDiscordFileEditor()" style="padding: 0.75rem 1.5rem;">CANCEL</button>
                    <button type="button" class="btn btn-blue" onclick="saveDiscordFile()" style="padding: 0.75rem 1.5rem;">üíæ SAVE FILE</button>
                    <button type="button" class="btn btn-green" onclick="saveAndSyncDiscordFile()" style="padding: 0.75rem 1.5rem;">üíæ SAVE & SYNC TO GITHUB</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Hidden file input for importing Discord bot files -->
    <input type="file" id="discord-bot-files-input" multiple webkitdirectory directory style="display: none;" onchange="handleDiscordFilesImport(event)">

    <script src="script.js"></script>
</body>
</html>
